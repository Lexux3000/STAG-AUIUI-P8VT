trigger:
  branches:
    include:
    - master
  paths:
    include:
    - OnlyShare.Server
variables:
- name: buildConfiguration
  value: 'Release'
stages:
- stage: __default
  jobs:
  - job: Job
    pool:
      vmImage: windows-latest
    steps:
    - task: UseDotNet@2
      displayName: Use Dotnet 7
      inputs:
        version: "7.0.x"
    - task: NuGetToolInstaller@0
      displayName: "Install NuGet"
      inputs:
        versionSpec: 6.0.x
        checkLatest: true
    - task: DotNetCoreCLI@2
      displayName: 'Dotnet restore'
      inputs:
        command: restore
        projects: '**/*.csproj'
    - task: CmdLine@2
      displayName: "Dotnet build OnlyShare.Server"
      inputs:
        script: dotnet build Server/OnlyShare.Server.csproj -o $(Build.ArtifactStagingDirectory) --configuration Release /p:EnvironmentName=Development

